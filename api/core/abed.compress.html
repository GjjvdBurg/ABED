
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Result Compression &#8212; abed 0.1 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-abed.compress">
<span id="result-compression"></span><h1>Result Compression<a class="headerlink" href="#module-abed.compress" title="Permalink to this headline">¶</a></h1>
<p>Functions for compressing result directories.</p>
<p>The functions in this module are used to compress results files for datasets
that are completely finished. This can be useful for when raw results need to
be stored on disk, but storage space is sparse. The compression algorithm used
can be set by the user in the configuration file (<a class="reference internal" href="../../usage/settings.html#std:setting-COMPRESSION"><code class="xref std std-setting docutils literal notranslate"><span class="pre">COMPRESSION</span></code></a>
setting).  All compressed files are tar files, generated with the highest
possible compression setting.</p>
<dl class="function">
<dt id="abed.compress.compress_dataset">
<code class="sig-prename descclassname">abed.compress.</code><code class="sig-name descname">compress_dataset</code><span class="sig-paren">(</span><em class="sig-param">dset</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abed/compress.html#compress_dataset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abed.compress.compress_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Compress results of a given dataset</p>
<p>This function compresses the results for a given dataset into a compressed
tar file. This is done through the tarfile module for the gzip and bzip2
compression algorithms. When lzma is used, the tarfile module can only be
used when ABED is run through Python 3 (as lzma compression is not
available in the Python 2 tarfile package). When running on Python 2 on a
posix platform however, we assume that lzma compression is available in the
<code class="docutils literal notranslate"><span class="pre">tar</span></code> command. Therefore, in this case the result directory is compressed
using a call to <code class="docutils literal notranslate"><span class="pre">tar</span></code>.</p>
<p>In all cases, the highest compression level is used, to save as much disk
space as possible.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dset</strong> (<em>str/tuple</em>) – The name of the dataset. Depending on the type of experiments that were
done this is either a string or a tuple of strings</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>ABED doesn’t remove the existing folder, so this should be done by the
user.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>SystemExit</strong> – When an unknown compression algorithm is specified, when lzma
    compression is requested on an unsupported platform, or when an error
    occurs with the external <code class="docutils literal notranslate"><span class="pre">tar</span></code> command, the program exits.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="abed.compress.compress_results">
<code class="sig-prename descclassname">abed.compress.</code><code class="sig-name descname">compress_results</code><span class="sig-paren">(</span><em class="sig-param">task_dict</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abed/compress.html#compress_results"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abed.compress.compress_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Compress results for all datasets which are complete</p>
<p>This function iterates over all datasets defined in the settings file, and
collects a list of files in the result directory that correspond to each
dataset. Next, for each dataset that is complete, the function
<a class="reference internal" href="#abed.compress.compress_dataset" title="abed.compress.compress_dataset"><code class="xref py py-func docutils literal notranslate"><span class="pre">compress_dataset()</span></code></a> is called, which does the actual compressing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task_dict</strong> (<em>dict</em>) – The dict with the mappings from hashes to command dicts, as returned by
<a class="reference internal" href="abed.tasks.html#abed.tasks.init_tasks" title="abed.tasks.init_tasks"><code class="xref py py-func docutils literal notranslate"><span class="pre">tasks.init_tasks()</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="abed.compress.dataset_completed">
<code class="sig-prename descclassname">abed.compress.</code><code class="sig-name descname">dataset_completed</code><span class="sig-paren">(</span><em class="sig-param">dsetfiles</em>, <em class="sig-param">dset</em>, <em class="sig-param">task_dict</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abed/compress.html#dataset_completed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abed.compress.dataset_completed" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a given dataset is complete</p>
<p>This function checks if all results for a given dataset are available on
disk. This is done by checking if all hashes for the specified dataset are
available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dsetfiles</strong> (<em>list</em>) – Filenames of files relating to this dataset</p></li>
<li><p><strong>dset</strong> (<em>str/tuple</em>) – The name of the dataset. Depending on the type of experiments that were
done this is either a string or a tuple of strings</p></li>
<li><p><strong>task_dict</strong> (<em>dict</em>) – The dict with the mappings from hashes to command dicts, as returned by
<a class="reference internal" href="abed.tasks.html#abed.tasks.init_tasks" title="abed.tasks.init_tasks"><code class="xref py py-func docutils literal notranslate"><span class="pre">tasks.init_tasks()</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Whether or not all results for the given dataset are available.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>SystemExit</strong> – When trying to compress results for an experiment type which does not
    support result compression (for instance when using RAW mode), an error
    is printed and the program exits.</p>
</dd>
</dl>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">abed</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Gertjan van den Burg.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/api/core/abed.compress.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>